<!DOCTYPE html>
<html lang="en">

<head>
  <!-- God Bless My Code ;) -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Styles -->
  <link href='styles/main.css' rel='stylesheet'>
  <!-- Animations -->
  <!-- Font -->
  <link href="https://api.fontshare.com/css?f[]=supreme@200&display=swap" rel="stylesheet">
  <title>New Life Ministries</title>
</head>

<body>
  <!-- Navigation Start -->
  <nav id='navbar'>
    <div class='nav-wrapper'>
      <div class="logo">

        <img src='images/nlmlogo.png' class='' alt='new life Ministries logo'>
        <p id='logo-p'>New Life Ministries</p>

      </div>

      <ul class="nav-links">
        <li class="nav-link"><a href="index.html">Home</a></li>
        <li class="nav-link"><a href="#">Donate</a></li>
        <li class="nav-link"><a href="#">Contact Us</a></li>
      </ul>

      <button id='logo-p' class="hamburger hamburger--spring" type="button" aria-label="Navigation Toggle">
        <span class="hamburger-box">
          <span class="hamburger-inner"></span>
        </span>
      </button>
    </div>
  </nav>
  <!-- Navigation End -->
  <!-- Main Container Start -->
  <main>
    <!-- New Landing Concept Start -->
    <section class='new-landing'>
      <video id="videoBG" poster="images/msday137.jpg" autoplay muted playsinline>
        <source src="videos/landingvb.mp4" type="video/mp4">
      </video>
      <div class='new-landing-heading'>
        <h1>Welcome to <span>La Laja.</span></h1>
        <p>Reaching the unchurched people groups of the world.</p>
        <div>
          <a class='new-btn'>Donate Now</a>
          <a class='new-btn'>Contact Us</a>
        </div>
      </div>
      <div class="overlay"></div>
    </section>
    <!-- New Landing Concept End -->
    <!-- Videos Start -->
    <section id='videos'>
      <div class='videos'>
        <div class='video-box'>
          <div class='video-text'>
            <div>
              <h2>Welcome to La Laja</h2>
              <span>Episode One</span>
            </div>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Sit cum aperiam earum cupiditate temporibus
              laboriosam quos labore molestiae vitae repellat.</p>
            <img src='images/arrow-down-sign-to-navigate.svg' alt='arrow down help user navigate' class='arrow-icon'>
          </div>
          <a class='img-a' href='videos/LaLajaE1.mp4'><img src='images/MX Day One -35.jpg' alt='jose reyes' class=''>
            <div class='play-a'>
              <img src='images/play.svg' alt='' class=''>
            </div>
          </a>
        </div>
        <div class='video-box'>
          <div class='video-text'>
            <div>
              <h2>The Sanctuary</h2>
              <span>Episode Two</span>
            </div>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Sit cum aperiam earum cupiditate temporibus
              laboriosam quos labore molestiae vitae repellat.</p>
            <img src='images/arrow-down-sign-to-navigate.svg' alt='arrow down help user navigate' class='arrow-icon'>
          </div>
          <a class='img-a' href='videos/LaLajaE2.mp4'><img src='images/fire.jpg' class='' alt='Jose Reyes'>
            <div class='play-a'>
              <img src='images/play.svg' alt='' class=''>
            </div>
          </a>
        </div>
        <div class='video-box'>
          <div class='video-text'>
            <div>
              <h2>The Three Villages</h2>
              <span>Episode Three</span>
            </div>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Sit cum aperiam earum cupiditate temporibus
              laboriosam quos labore molestiae vitae repellat.</p>
            <img src='images/arrow-down-sign-to-navigate.svg' alt='arrow down help user navigate' class='arrow-icon'>
          </div>
          <a class='img-a' href='videos/LaLajaE3.mp4'><img src='images/vimg3.jpg' alt='jose reyes' class=''>
            <div class='play-a'>
              <img src='images/play.svg' alt='' class=''>
            </div>
          </a>
        </div>
        <div class='video-box'>
          <div class='video-text'>
            <div>
              <h2>Church Dedication</h2>
              <span>Episode Four</span>
            </div>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Sit cum aperiam earum cupiditate temporibus
              laboriosam quos labore molestiae vitae repellat.</p>
            <img src='images/arrow-down-sign-to-navigate.svg' alt='arrow down help user navigate' class='arrow-icon'>
          </div>
          <a class='img-a' href='videos/LaLajaE4.mp4'><img src='images/vimg4.jpg' alt='jose reyes' class=''>
            <div class='play-a'>
              <img src='images/play.svg' alt='' class=''>
            </div>
          </a>
        </div>
        <div class='video-box'>
          <div class='video-text'>
            <div>
              <h2>Interview with Jose Reyes</h2>
              <span>Episode Five</span>
            </div>
            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Sit cum aperiam earum cupiditate temporibus
              laboriosam quos labore molestiae vitae repellat.</p>
            <img src='images/arrow-down-sign-to-navigate.svg' alt='arrow down help user navigate' class='arrow-icon'>
          </div>
          <a class='img-a' href='videos/LaLajaE5.mp4'><img src='images/vimg5.jpg' alt='jose reyes' class=''>
            <div class='play-a'>
              <img src='images/play.svg' alt='' class=''>
            </div>
          </a>
        </div>
      </div>
    </section>
    <!-- Videos End -->
    <!-- Donations Start -->
    <section id='donations'>
      <div class='donations'>
        <div aria-hidden='true' class='donations-gallery'>
          <div class='top'></div>
          <div class='left'></div>
          <div class='right'></div>
        </div>
        <div class='donations-text'>
          <h2>Make a donation today!</h2>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Obcaecati animi laboriosam distinctio, reiciendis
            consequatur officiis.</p>
          <section class="products">
          </section>
        </div>
      </div>
    </section>
    <!-- Donations End -->
    <!-- FOOTER START -->
    <div class="footer">
      <div class='footer-container'>
        <div class='col'>
          <img src='images/nlmlogo.png' class='logo-footer' alt='nlm logo'>
          <h2>New Life Ministries</h2>
          <p>Reaching the unchurched people groups of the world.</p>
        </div>
        <div class='col contact'>
          <h2>Contact Us</h2>
          <ul>
            <li>NewLifeMinistries@info</li>
            <li>Mailing Address</li>
            <a
              href='https://docs.google.com/forms/d/e/1FAIpQLSe9Uc7CNITsPMgOjlJ44WmHbGdlbd5XdJXSmwLjYMLakWbdJw/viewform?usp=sf_link'>
              <li>Site Feedback</li>
            </a>
          </ul>
        </div>
        <div class='col'>
          <h2>Social Media</h2>
          <div class='social-media'>
            <a class='flex' href='https://www.facebook.com/offeringnewlife'><img src='images/facebook.svg'
                class='standard-icon' alt='facebook icon'>Facebook</a>
            <a class='flex' href='https://www.instagram.com/offeringnewlife/'><img src='images/instagram.svg'
                class='standard-icon' alt='insta icon'>Instagram</a>
          </div>
        </div>
        <div class='col contact'>
          <h2>Quick Links</h2>
          <ul>
            <li>Home Page</li>
            <li>Contact Page</li>
            <li>Donate Now</li>
          </ul>
        </div>
      </div>
      <div class='site-credit'>
        <h3>Developed and Designed by <span class='credit'><a href='https://rivaswebsites.com'>R.R.</a></span></h3>
      </div>
    </div>
    <!-- END OF FOOTER -->
    <!-- Landing Container End -->
  </main>
  <!-- Main Container End -->
  <template id="product">
    <div class="product">
      <!-- <img src="" alt="" /> -->
      <h2>name</h2>
      <!-- <p class="description">description</p>
      <p class="price">price</p> -->
      <form action="/.netlify/functions/create-checkout" method="post">
        <!-- <label for="quantity">Quantity</label>
        <input type="number" id="quantity" name="quantity" value="1" min="1" max="10" /> -->
        <input type="hidden" name="sku" value="" />
        <button type="submit">Donate</button>
      </form>
    </div>
  </template>

  <script src="https://js.stripe.com/v3/"></script>
  <script>
    function format(amount, currency) {
      return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency,
      }).format((amount / 100).toFixed(2));
    }

    async function handleSubmit(event) {
      event.preventDefault();
      document
        .querySelectorAll('button')
        .forEach((button) => (button.disabled = true));

      const form = new FormData(event.target);
      const data = {
        sku: form.get('sku'),
        //quantity: Number(form.get('quantity')),
      };

      const response = await fetch('/.netlify/functions/create-checkout', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
      }).then((res) => res.json());

      const stripe = Stripe(response.publishableKey);
      const {
        error
      } = await stripe.redirectToCheckout({
        sessionId: response.sessionId,
      });

      if (error) {
        document
          .querySelectorAll('button')
          .forEach((button) => (button.disabled = false));
        console.error(error);
      }
    }

    async function loadProducts() {
      if (!'content' in document.createElement('template')) {
        console.error('Your browser doesnâ€™t support HTML template elements.');
        return;
      }

      const data = await fetch('/.netlify/functions/get-products')
        .then((res) => res.json())
        .catch((err) => console.error(err));

      const products = document.querySelector('.products');
      const template = document.querySelector('#product');

      data.forEach((product) => {
        const container = template.content.cloneNode(true);

        container.querySelector('h2').innerText = product.name;
        // container.querySelector('.description').innerText =
        //   product.description;
        // container.querySelector('.price').innerText = format(
        //   product.amount,
        //   product.currency
        // );
        container.querySelector('[name=sku]').value = product.sku;

        // const img = container.querySelector('img');
        // img.src = product.image;
        // img.alt = product.name;

        const form = container.querySelector('form');
        form.addEventListener('submit', handleSubmit);

        products.appendChild(container);
      });
    }

    loadProducts();
  </script>
  <!-- Scripts Start -->
  <script src='scripts/scripts.js'></script>
</body>

</html>